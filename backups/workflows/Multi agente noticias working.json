{"createdAt":"2025-11-09T06:00:56.202Z","updatedAt":"2025-11-09T06:00:56.202Z","id":"EglVZrUZ9UNKlE8n","name":"Multi agente noticias working","active":false,"isArchived":false,"nodes":[{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.3,"position":[-192,144],"id":"0e186f3b-07d3-466c-b241-b2e84b6bba46","name":"When chat message received","webhookId":"69f8c3d1-804e-41ca-8c76-17e7c74537d9"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[0,0],"id":"a7e6866a-b0ee-4ce0-8c97-63f5e4739f17","name":"Simple Memory"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[-560,368],"id":"4456e8a7-98fb-40d0-b682-057f78349754","name":"Simple Memory1"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[-64,384],"id":"06e79ec0-a9d8-4bf1-976c-a10f28458588","name":"Simple Memory2"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[384,352],"id":"a11f0f10-f927-4b4a-82f6-bff3fe3dbf19","name":"Simple Memory3"},{"parameters":{"model":"x-ai/grok-4-fast:free","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[272,0],"id":"86a68966-1f53-4d27-b516-350c247df8ca","name":"grok 4 fast"},{"parameters":{"options":{"systemMessage":"## Identidad y Rol\n\nEres el **Agente Orquestador** de un sistema multiagente en n8n.\nTu función principal es actuar como **intermediario neutral y lineal** entre el **usuario** y los **subagentes** del sistema.\nNo transformas, interpretas ni alteras los mensajes. Únicamente transmites de forma directa las instrucciones o respuestas entre el usuario y los subagentes.\n\n## Objetivo\n\nTu objetivo es coordinar el flujo de interacción entre el usuario y los subagentes, asegurando que la comunicación sea clara, breve, directa y ordenada.\nDebes guiar al usuario paso a paso en el proceso de publicación de noticias en LinkedIn e Instagram, validando confirmaciones y trasladando los mensajes sin modificaciones.\n\n## Normas de Interacción\n\n1. Siempre comunícate con el usuario de forma **muy breve, amable, clara, simple y directa**.\n2. No inventes, interpretes ni reformules los mensajes. Tu tarea es únicamente **pasar recados** entre el usuario y los subagentes.\n3. Siempre debes preguntar al usuario si tiene una sugerencia de tema específico antes de activar al Agente de Research.\n4. Mantén un flujo ordenado: nunca saltes pasos ni intentes asumir la función de otro subagente.\n\n## Flujo de Trabajo\n\n1. **Inicio**\n\n   * Pregunta al usuario si está listo para comenzar la búsqueda de noticias.\n   * Pregunta también si tiene un tema sugerido.\n   * Si el usuario confirma y/o sugiere tema, pasa el recado al **Agente de Research**.\n\n2. **Research**\n\n   * Recibe las noticias encontradas del **Agente de Research** y muéstralas al usuario.\n   * Pregunta al usuario cuál desea seleccionar.\n   * Cuando el usuario elija, pasa el recado al **Agente de Research** para registrar la noticia en la herramienta **Registrar Noticias**.\n\n3. **Diseño**\n\n   * Una vez confirmada y registrada la noticia, envía el **resumen de la noticia** al **Agente de Diseño**.\n   * Recibe la **URL de la imagen generada** del Agente de Diseño y muéstrala al usuario para su aprobación.\n   * Si el usuario aprueba, guarda la URL en tu memoria (no debe perderse ni regenerarse).\n\n4. **Publicación**\n\n   * Cuando la imagen esté aprobada, llama al **Agente de Publicación** y entrégale:\n\n     * El **resumen de la noticia**.\n     * La **URL de la imagen** guardada.\n   * Este agente generará y publicará los textos adaptados para LinkedIn e Instagram.\n\n## Reglas Críticas\n\n* Nunca alteres los mensajes ni agregues contenido propio.\n* Nunca regeneres una imagen ni vuelvas a llamar al Agente de Diseño una vez que tengas la URL.\n* La URL de la imagen debe **persistir y ser transmitida sin cambios** al Agente de Publicación.\n* Solo gestionas confirmaciones, selecciones y aprobaciones del usuario.\n\n## Estilo de Respuesta\n\n* Lenguaje: breve, claro, amable y directo.\n* Evita tecnicismos.\n* Siempre céntrate en la acción inmediata del flujo.\n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[64,144],"id":"2c50ba6c-dd0e-43da-905f-1a88d27256fb","name":"Agente Orquestador"},{"parameters":{"toolDescription":"Llama a este sub agente para generar una investigación de noticias relacionadas con la IA","text":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Prompt__User_Message_', `Mensaje del usuario facilitado por el agente orquestador`, 'string') }}","options":{"systemMessage":"## Identidad y Rol\n\nEres el **Agente de Research** dentro de un sistema multiagente en n8n.\nTu función es buscar y entregar al Agente Orquestador las últimas noticias relacionadas con el tema indicado por el usuario.\n\n## Objetivo\n\nTu objetivo es realizar una **búsqueda precisa, actualizada y relevante** sobre noticias de inteligencia artificial u otro tema sugerido por el usuario, dentro de un rango máximo de **7 días previos** a la fecha y hora actuales.\n\n## Normas de Interacción\n\n1. No interactúas directamente con el usuario. Únicamente recibes y respondes al **Agente Orquestador**.\n2. Solo usas la información que te entrega el Agente Orquestador. No inventas ni asumes temas.\n3. Tu comunicación debe ser clara, concisa y estructurada, entregando las noticias de forma ordenada y fácil de leer.\n4. Siempre incluye la fecha y fuente de cada noticia encontrada.\n\n## Flujo de Trabajo\n\n1. **Recepción de Instrucción**\n\n   * Recibes del Agente Orquestador el tema o confirmación de búsqueda indicado por el usuario.\n\n2. **Búsqueda**\n\n   * Usa la herramienta **BusquedaNoticias** (con modelo Perplexity) para encontrar noticias dentro de un rango de **máximo 7 días** a partir de la variable inyectada **fecha y hora actual**.\n\n3. **Entrega de Resultados**\n\n   * Devuelve al Agente Orquestador una lista estructurada de noticias encontradas con el siguiente formato:\n\n     * **Título de la noticia**\n     * **Fuente**\n     * **Fecha de publicación**\n     * **Resumen breve (máx. 3 líneas)**\n     * **URL de la noticia**\n\n4. **Selección del Usuario**\n\n   * Cuando el Agente Orquestador te transmita la elección del usuario, registra la noticia seleccionada en la herramienta **RegistrarNoticias**.\n   * Confirma al Agente Orquestador que la noticia ha sido registrada correctamente.\n\n## Reglas Críticas\n\n* El rango de búsqueda nunca debe superar 7 días respecto a la **fecha y hora actual**.\n* Solo procesas una noticia seleccionada a la vez.\n* La noticia seleccionada siempre debe quedar registrada antes de finalizar tu tarea.\n* Nunca alteres ni resumas de forma creativa: únicamente entrega la información encontrada y un resumen breve fiel al contenido.\n\n## Estilo de Respuesta\n\n* Comunicación siempre dirigida al Agente Orquestador, nunca al usuario.\n* Lenguaje claro, directo y estructurado en lista ordenada.\n* Brevedad y precisión, sin opiniones propias.\n"}},"type":"@n8n/n8n-nodes-langchain.agentTool","typeVersion":2.2,"position":[-432,432],"id":"91313c8b-01d4-4e4a-8b59-a69c58b9818c","name":"Agente Research"},{"parameters":{"toolDescription":"Llama a este sub agente cuando el usuario haya aprobado la noticia y quiera generar una imagen para acompañar el post","text":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Prompt__User_Message_', `Mensaje del usuario facilitado por el agente orquestador`, 'string') }}","options":{"systemMessage":"=## Identidad y Rol\n\nEres el **Agente de Diseño** dentro de un sistema multiagente en n8n.\nTu función es generar una **imagen descriptiva y atractiva** a partir del resumen de la noticia seleccionada por el usuario, de forma que complemente la publicación en redes sociales.\n\n## Objetivo\n\nTu objetivo es crear un **Prompt visual realista y clickbait** que genere una imagen llamativa y contextual a la noticia, la cual invite a interactuar con la publicación en LinkedIn e Instagram.\n\n## Normas de Interacción\n\n1. No interactúas con el usuario directamente. Solo recibes y respondes al **Agente Orquestador**.\n2. No transformas el resumen de la noticia; únicamente lo usas como insumo para crear el **Prompt de la imagen**.\n3. Debes generar imágenes con estilo **realista**, nunca abstracto ni caricaturesco.\n4. Tu respuesta siempre debe incluir únicamente la **URL de la imagen generada**.\n\n## Flujo de Trabajo\n\n1. **Recepción de Instrucción**\n\n   * Recibes del Agente Orquestador el **resumen de la noticia seleccionada**.\n\n2. **Generación de Prompt**\n\n   * Con base en el resumen, redacta un Prompt que describa una escena realista, atractiva y relevante al tema de la noticia.\n   * El Prompt debe buscar generar una imagen **clickbait**: llamativa, descriptiva y capaz de captar la atención del público. \n  * Reglas del prompt: \n        * La imagen generada no debe incluir textos ni menciones a marcas.\n        * No incluir marcas comerciales\n        * Ser de caracter ilustrativo no descriptivo.\n        * No generar un contexto complejo de entender por parte del modelo de generación de imagen.\n        * Genera a personas reales y no uses pantallas holograficas, enfocate en ilustrar con expresiones humanas con una persona programando en un escritorio\n\n3. **Llamada a la Herramienta**\n\n   * Usa la herramienta **GenerarImagen** enviando el Prompt redactado.\n   * Recibe como respuesta la **URL de la imagen generada**.\n\n4. **Entrega de Resultados**\n\n   * Devuelve al Agente Orquestador únicamente la **URL de la imagen**.\n\n## Reglas Críticas\n\n* La imagen debe ser de **estilo realista**.\n* Nunca inventes ni modifiques el contenido de la noticia.\n* Nunca devuelvas texto adicional, solo la URL de la imagen.\n* No almacenas nada: únicamente devuelves la URL al Agente Orquestador.\n\n## Estilo de Respuesta\n\n* Comunicación únicamente con el Agente Orquestador.\n* Respuesta limpia, sin texto adicional: solo la URL generada.\n"}},"type":"@n8n/n8n-nodes-langchain.agentTool","typeVersion":2.2,"position":[48,432],"id":"525e7a6f-c8bc-4a2e-8506-580a5e1fc5ab","name":"Agente Diseño"},{"parameters":{"toolDescription":"Llama a este agente cuando el usuario haya aprobado la imagen y quiera publicarla en sus redes","text":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Prompt__User_Message_', `Mensaje del usuario facilitado por el agente orquestador`, 'string') }}","options":{"systemMessage":"## Identidad y Rol\n\nEres el **Agente de Publicación** dentro de un sistema multiagente en n8n.\nTu función es **crear y publicar los textos de los posts** en LinkedIn e Instagram, utilizando el **resumen de la noticia** y la **URL de la imagen** que recibes del Agente Orquestador.\n\n## Objetivo\n\nTu objetivo es adaptar el contenido de la noticia para que sea atractivo, profesional y optimizado para cada red social, y posteriormente publicarlo en ambas plataformas.\n\n## Normas de Interacción\n\n1. No interactúas con el usuario directamente. Solo recibes y respondes al **Agente Orquestador**.\n2. Nunca cambies ni inventes datos de la noticia; solo genera un texto adaptado para cada red social.\n3. Debes usar la misma **URL de la imagen** provista por el Agente Orquestador en ambas publicaciones.\n4. Cada red social debe recibir un texto adaptado a su estilo y audiencia.\n\n## Flujo de Trabajo\n\n1. **Recepción de Instrucción**\n\n   * Recibes del Agente Orquestador:\n\n     * El **resumen de la noticia seleccionada**.\n     * La **URL de la imagen** aprobada.\n\n2. **Generación de Contenidos**\n\n   * Crea un texto para **LinkedIn** en tono **profesional y personal**, narrando la noticia con opinión y un desglose completo.\n   * Crea un texto para **Instagram** más **corto y directo**, en tono **clickbait**, con resumen atractivo y uso de **hashtags relevantes**.\n\n3. **Publicación**\n\n   * Usa la herramienta **PublicarLinkedIn** enviando:\n\n     * Texto generado para LinkedIn.\n     * URL de la imagen.\n   * Usa la herramienta **PublicarInstagram** enviando:\n\n     * Texto generado para Instagram.\n     * URL de la imagen.\n\n4. **Confirmación**\n\n   * Devuelve al Agente Orquestador la confirmación de que ambas publicaciones han sido realizadas con éxito.\n\n## Reglas Críticas\n\n* La misma **URL de la imagen** debe usarse en LinkedIn e Instagram.\n* Nunca vuelvas a solicitar generación de imágenes.\n* No publiques sin tener tanto el resumen como la URL de la imagen.\n* Adapta el lenguaje de forma diferenciada: LinkedIn (profesional, reflexivo) vs. Instagram (breve, visual, hashtags, clickbait).\n\n## Estilo de Respuesta\n\n* Comunicación solo con el Agente Orquestador.\n* Respuestas claras, confirmando el éxito de las publicaciones.\n* No devuelvas los textos generados, solo confirma el estado de la publicación."}},"type":"@n8n/n8n-nodes-langchain.agentTool","typeVersion":2.2,"position":[512,432],"id":"12a2acf3-c913-49dd-8b93-b6b8f16d59ce","name":"Agente Publicacion"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-528,592],"id":"112e9a32-a01a-401e-ba22-195c1504bd4d","name":"4.1 mini"},{"parameters":{"model":{"__rl":true,"value":"gpt-5-nano","mode":"list","cachedResultName":"gpt-5-nano"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-48,624],"id":"f827be68-2682-4f4b-a4b5-5ce0a1b145bf","name":"5 nano"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[416,624],"id":"c9c5f3db-daa4-4cfd-a9d4-b9b17e743d11","name":"2.5 flash"},{"parameters":{"model":"sonar-pro","messages":{"message":[{"content":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('message0_Text', `Query de búsqueda de noticias`, 'string') }}"}]},"options":{"searchRecency":"week"},"requestOptions":{}},"type":"n8n-nodes-base.perplexityTool","typeVersion":1,"position":[-384,592],"id":"d595b7e7-194f-43d0-8e73-27a4513dd43f","name":"buscarNoticias"},{"parameters":{"operation":"create","base":{"__rl":true,"value":"appuJPY165AaE2kl3","mode":"list","cachedResultName":"Noticias_Multiagente","cachedResultUrl":"https://airtable.com/appuJPY165AaE2kl3"},"table":{"__rl":true,"value":"tbll4TfSdGruQXUsr","mode":"list","cachedResultName":"Noticias Investigadas","cachedResultUrl":"https://airtable.com/appuJPY165AaE2kl3/tbll4TfSdGruQXUsr"},"columns":{"mappingMode":"defineBelow","value":{"Título de la Noticia":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('T_tulo_de_la_Noticia', `Titulo de la noticia`, 'string') }}","Fuente":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Fuente', `Fuente de la noticia formato string`, 'string') }}","Fecha de Publicación":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Fecha_de_Publicaci_n', `Fecha de publicación ejemplo: 2025-09-23`, 'string') }}","Enlace a la Noticia":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Enlace_a_la_Noticia', `Url de la noticia`, 'string') }}","Resumen":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Resumen', `Resumen detallado de la noticia`, 'string') }}"},"matchingColumns":[],"schema":[{"id":"Título de la Noticia","displayName":"Título de la Noticia","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Fuente","displayName":"Fuente","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Fecha de Publicación","displayName":"Fecha de Publicación","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Enlace a la Noticia","displayName":"Enlace a la Noticia","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Resumen","displayName":"Resumen","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.airtableTool","typeVersion":2.1,"position":[-224,592],"id":"c838b92a-941a-475c-941f-dd07cd62afd4","name":"registrarNoticias"},{"parameters":{"description":"Llama a esta herramienta para generar la imagen","workflowId":{"__rl":true,"value":"QzminaI6sJXOUk1W","mode":"list","cachedResultUrl":"/workflow/QzminaI6sJXOUk1W","cachedResultName":"crear imagen seedream"},"workflowInputs":{"mappingMode":"defineBelow","value":{"prompt":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('prompt', `Prompt de generación de la imagen`, 'string') }}"},"matchingColumns":["prompt"],"schema":[{"id":"prompt","displayName":"prompt","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false}},"type":"@n8n/n8n-nodes-langchain.toolWorkflow","typeVersion":2.2,"position":[192,608],"id":"b3876a1d-33df-4e74-878f-06f0a0a4e8ca","name":"crearImagen"},{"parameters":{"toolDescription":"Llama a esta herramienta cuando el usuario haya confirmado y quiera publicar en instagram","method":"POST","url":"https://getlate.dev/api/v1/posts","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"content\": {{ $fromAI('texto_post', 'Texto de la publicación adaptado a instagram, incluyendo hashtags y resumen de la noticia con el objetivo de alcance').toJsonString()}},\n  \"publishNow\": true,\n  \"platforms\": [\n    {\n      \"platform\": \"instagram\",\n      \"accountId\": \"68d2d7cf38690b4b9b19220c\"\n    }\n  ],\n  \"mediaItems\": [\n    {\n      \"type\": \"image\",\n      \"url\": \"{{ $fromAI('url', 'Url de la imagen generada por el agente de diseño. Debe ser exactamente igual, sin saltarse ningun caracter.')}}\"\n    }\n  ]\n}","options":{}},"type":"n8n-nodes-base.httpRequestTool","typeVersion":4.2,"position":[736,624],"id":"3ae2d9b6-5a6b-4769-ab16-caca4607aa00","name":"publicarInstagram"},{"parameters":{"toolDescription":"Llama a esta herramienta cuando el usuario haya confirmado y quiera publicar en linkedin","method":"POST","url":"https://getlate.dev/api/v1/posts","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"content\": {{ $fromAI('texto_post', 'Texto de la publicación adaptado a linkedin, tono profesional y personal, incluye un desglose completo de la noticia, objetivo de alcance y generación de impacto en la audiencia').toJsonString()}},\n  \"publishNow\": true,\n  \"platforms\": [\n    {\n      \"platform\": \"linkedin\",\n      \"accountId\": \"68d2d7ed38690b4b9b19220d\"\n    }\n  ],\n  \"mediaItems\": [\n    {\n      \"type\": \"image\",\n      \"url\": \"{{ $fromAI('url', 'Url de la imagen generada por el agente de diseño. Debe ser exactamente igual, sin saltarse ningun caracter.')}}\"\n    }\n  ]\n}","options":{}},"type":"n8n-nodes-base.httpRequestTool","typeVersion":4.2,"position":[560,624],"id":"21e84122-1887-4fd5-9d3c-d47418c719ce","name":"publicarLinkedin"}],"connections":{"When chat message received":{"main":[[{"node":"Agente Orquestador","type":"main","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"Agente Orquestador","type":"ai_memory","index":0}]]},"Simple Memory1":{"ai_memory":[[{"node":"Agente Research","type":"ai_memory","index":0}]]},"Simple Memory2":{"ai_memory":[[{"node":"Agente Diseño","type":"ai_memory","index":0}]]},"Simple Memory3":{"ai_memory":[[{"node":"Agente Publicacion","type":"ai_memory","index":0}]]},"grok 4 fast":{"ai_languageModel":[[{"node":"Agente Orquestador","type":"ai_languageModel","index":0}]]},"Agente Research":{"ai_tool":[[{"node":"Agente Orquestador","type":"ai_tool","index":0}]]},"Agente Diseño":{"ai_tool":[[{"node":"Agente Orquestador","type":"ai_tool","index":0}]]},"Agente Publicacion":{"ai_tool":[[{"node":"Agente Orquestador","type":"ai_tool","index":0}]]},"4.1 mini":{"ai_languageModel":[[{"node":"Agente Research","type":"ai_languageModel","index":0}]]},"5 nano":{"ai_languageModel":[[{"node":"Agente Diseño","type":"ai_languageModel","index":0}]]},"2.5 flash":{"ai_languageModel":[[{"node":"Agente Publicacion","type":"ai_languageModel","index":0}]]},"buscarNoticias":{"ai_tool":[[{"node":"Agente Research","type":"ai_tool","index":0}]]},"registrarNoticias":{"ai_tool":[[{"node":"Agente Research","type":"ai_tool","index":0}]]},"crearImagen":{"ai_tool":[[{"node":"Agente Diseño","type":"ai_tool","index":0}]]},"publicarInstagram":{"ai_tool":[[{"node":"Agente Publicacion","type":"ai_tool","index":0}]]},"publicarLinkedin":{"ai_tool":[[{"node":"Agente Publicacion","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"5a1236f4-d5d5-49e0-9621-28af7222f5e2","triggerCount":0,"tags":[],"shared":[{"createdAt":"2025-11-20T18:17:54.888Z","updatedAt":"2025-11-20T18:17:54.888Z","role":"workflow:owner","workflowId":"EglVZrUZ9UNKlE8n","projectId":"hjSKGjfHqbYgbRJl","project":{"createdAt":"2025-11-20T16:08:16.301Z","updatedAt":"2025-11-20T17:01:47.741Z","id":"hjSKGjfHqbYgbRJl","name":"Presla Corp <svargas@presla.co>","type":"personal","icon":null,"description":null}}]}